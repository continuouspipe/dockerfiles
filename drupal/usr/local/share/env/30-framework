#!/bin/bash

export WEB_DIRECTORY=${WEB_DIRECTORY:-docroot}

export DRUPAL_DATABASE_NAME=${DRUPAL_DATABASE_NAME:-drupaldb}
export DRUPAL_DATABASE_USERNAME=${DRUPAL_DATABASE_USERNAME:-drupal}
export DRUPAL_DATABASE_PASSWORD=${DRUPAL_DATABASE_PASSWORD:-drupal}
export DRUPAL_DATABASE_ROOT_PASSWORD=${DRUPAL_DATABASE_ROOT_PASSWORD:-drupal}
export DRUPAL_DATABASE_PREFIX=${DRUPAL_DATABASE_PREFIX:-}
export DRUPAL_DATABASE_HOST=${DRUPAL_DATABASE_HOST:-database}
export DRUPAL_DATABASE_PORT=${DRUPAL_DATABASE_PORT:-3306}

export DATABASE_NAME=${DATABASE_NAME:-${DRUPAL_DATABASE_NAME}}
export DATABASE_USER=${DATABASE_USER:-${DRUPAL_DATABASE_USERNAME}}
export DATABASE_PASSWORD=${DATABASE_PASSWORD:-${DRUPAL_DATABASE_PASSWORD}}
export DATABASE_ROOT_PASSWORD=${DATABASE_ROOT_PASSWORD:-${DRUPAL_DATABASE_ROOT_PASSWORD}}
export DATABASE_PREFIX=${DATABASE_PREFIX:-${DRUPAL_DATABASE_PREFIX}}
export DATABASE_HOST=${DATABASE_HOST:-${DRUPAL_DATABASE_HOST}}
export DATABASE_HOST_PORT=${DATABASE_HOST_PORT:-${DRUPAL_DATABASE_PORT}}

# Support older configurations by re-setting it back to the DATABASE_* versions
export DRUPAL_DATABASE_NAME=${DATABASE_NAME}
export DRUPAL_DATABASE_USERNAME=${DATABASE_USER}
export DRUPAL_DATABASE_PASSWORD=${DATABASE_PASSWORD}
export DRUPAL_DATABASE_ROOT_PASSWORD=${DATABASE_ROOT_PASSWORD}
export DRUPAL_DATABASE_PREFIX=${DATABASE_PREFIX}
export DRUPAL_DATABASE_HOST=${DATABASE_HOST}
export DRUPAL_DATABASE_PORT=${DATABASE_HOST_PORT}

export DRUPAL_DRUSH_ALIAS=${DRUPAL_DRUSH_ALIAS:-}

export DRUPAL_SYNC_SSH_KEY_NAME=${DRUPAL_SYNC_SSH_KEY_NAME:-}
export DRUPAL_SYNC_SSH_PRIVATE_KEY=${DRUPAL_SYNC_SSH_PRIVATE_KEY:-}
export DRUPAL_SYNC_SSH_PUBLIC_KEY=${DRUPAL_SYNC_SSH_PUBLIC_KEY:-}
export DRUPAL_SYNC_SSH_KNOWN_HOSTS=${DRUPAL_SYNC_SSH_KNOWN_HOSTS:-}

export DRUPAL_SYNC_SSH_USERNAME=${DRUPAL_SYNC_SSH_USERNAME:-}
export DRUPAL_SYNC_SSH_SERVER_HOST=${DRUPAL_SYNC_SSH_SERVER_HOST:-}
export DRUPAL_SYNC_SSH_SERVER_PORT=${DRUPAL_SYNC_SSH_SERVER_PORT:-22}
export DRUPAL_SYNC_DATABASE_FILENAME_GLOB=${DRUPAL_SYNC_DATABASE_FILENAME_GLOB:-}
export DATABASE_ARCHIVE_PATH=${DATABASE_ARCHIVE_PATH:-/tmp/database-backup.tar.gz}

export DRUPAL_INSTALL_PROFILE=${DRUPAL_INSTALL_PROFILE:-standard}
FORCE_DATABASE_DROP=${FORCE_DATABASE_DROP:-false}
FORCE_DATABASE_DROP="$(convert_to_boolean_string "$FORCE_DATABASE_DROP")"
export FORCE_DATABASE_DROP
INSTALL_DRUPAL=${INSTALL_DRUPAL:-true}
INSTALL_DRUPAL="$(convert_to_boolean_string "$INSTALL_DRUPAL")"
export INSTALL_DRUPAL

export DRUPAL_ADMIN_USERNAME=${DRUPAL_ADMIN_USERNAME:-drupal-continuous-pipe-admin}
export DRUPAL_ADMIN_PASSWORD=${DRUPAL_ADMIN_PASSWORD:-backdrop}
