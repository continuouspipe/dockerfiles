#!/bin/bash

export PHP_MEMORY_LIMIT=${PHP_MEMORY_LIMIT:-768M}
export WEB_DIRECTORY=${WEB_DIRECTORY:-/app/public}

export PRODUCTION_ENVIRONMENT=${PRODUCTION_ENVIRONMENT:-false}
export APP_HOSTNAME=${APP_HOSTNAME:-magento1.dev}
export PUBLIC_ADDRESS=${PUBLIC_ADDRESS:-https://magento.docker/}

export FORCE_DATABASE_DROP=${FORCE_DATABASE_DROP:-false}
export DATABASE_ARCHIVE_PATH=${DATABASE_ARCHIVE_PATH:-tools/assets/development/magentodb.sql.gz}

export DATABASE_NAME=${DATABASE_NAME:-magentodb}
export DATABASE_USER=${DATABASE_USER:-magento}
export DATABASE_PASSWORD=${DATABASE_PASSWORD:-magento}
export DATABASE_HOST=${DATABASE_HOST:-database}
export ADDITIONAL_SETUP_SQL=${ADDITIONAL_SETUP_SQL:-}

# deprecated
export DATABASE_ROOT_PASSWORD=${DATABASE_ROOT_PASSWORD:-}

if [ -n "$DATABASE_ROOT_PASSWORD" ]; then
  export DATABASE_ADMIN_USER=${DATABASE_ADMIN_USER:-root}
  export DATABASE_ADMIN_PASSWORD=${DATABASE_ADMIN_PASSWORD:-$DATABASE_ROOT_PASSWORD}
else
  export DATABASE_ADMIN_USER=${DATABASE_ADMIN_USER:-}
  export DATABASE_ADMIN_PASSWORD=${DATABASE_ADMIN_PASSWORD:-}
fi

set +e
is_hem_project
set -e
export IS_HEM="$?"
export HEM_RUN_ENV="${HEM_RUN_ENV:-local}"

export ASSET_ARCHIVE_PATH=${ASSET_ARCHIVE_PATH:-tools/assets/development/media.files.tgz}
export ASSET_DOWNLOAD_ENVIRONMENTS=${ASSET_DOWNLOAD_ENVIRONMENTS:-development}

export FRONTEND_INSTALL_DIRECTORY=${FRONTEND_INSTALL_DIRECTORY:-/app/tools/inviqa}
export FRONTEND_BUILD_DIRECTORY=${FRONTEND_BUILD_DIRECTORY:-/app/tools/inviqa}
export FRONTEND_BUILD_ACTION=${FRONTEND_BUILD_ACTION:-build}
export GULP_BUILD_THEME_NAME=${GULP_BUILD_THEME_NAME:-}

export MAGENTO_MODE=${MAGENTO_MODE:-production}
DEFAULT_MAGENTO_RUN_CODE_MAPPING="$APP_HOSTNAME default;"
export MAGENTO_RUN_CODE_MAPPING=${MAGENTO_RUN_CODE_MAPPING:-$DEFAULT_MAGENTO_RUN_CODE_MAPPING}

export MAGENTO_CRYPT_KEY=${MAGENTO_CRYPT_KEY:-}

export MEMCACHED_HOST=${MEMCACHED_HOST:-memcached}
export MEMCACHED_HOST_PORT=${MEMCACHED_HOST_PORT:-11211}

export REDIS_HOST=${REDIS_HOST:-redis}
export REDIS_HOST_PORT=${REDIS_HOST_PORT:-6379}
export MAGENTO_REDIS_CACHE_DATABASE=${MAGENTO_REDIS_CACHE_DATABASE:-0}
export MAGENTO_REDIS_FULL_PAGE_CACHE_DATABASE=${MAGENTO_REDIS_FULL_PAGE_CACHE_DATABASE:-1}

export MAGENTO_ADMIN_FRONTNAME=${MAGENTO_ADMIN_FRONTNAME:-admin}

export MAGENTO_CREATE_ADMIN_USER=${MAGENTO_CREATE_ADMIN_USER:-$DEVELOPMENT_MODE}
export MAGENTO_ADMIN_USERNAME=${MAGENTO_ADMIN_USERNAME:-admin}
export MAGENTO_ADMIN_EMAIL=${MAGENTO_ADMIN_EMAIL:-admin@localhost}
export MAGENTO_ADMIN_PASSWORD=${MAGENTO_ADMIN_PASSWORD:-admin}
export MAGENTO_ADMIN_FORENAME=${MAGENTO_ADMIN_FORENAME:-AdminForename}
export MAGENTO_ADMIN_SURNAME=${MAGENTO_ADMIN_SURNAME:-AdminSurname}
